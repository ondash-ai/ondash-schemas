{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "document.json",
  "title": "Document MongoDB types",
  "description": "Document models for ledger and file storage",
  "$defs": {
    "DContent": {
      "title": "DContent",
      "type": "object",
      "properties": {
        "doc_type": { "type": "string", "default": "" },
        "state": { "type": "string", "default": "" },
        "params": { "type": "object", "default": {} }
      }
    },
    "DDocumentObsoleteBase": {
      "title": "DDocumentObsoleteBase",
      "type": "object",
      "properties": {
        "id": { "type": ["string", "null"], "default": null },
        "version": { "type": "string", "default": "0.2" },
        "title": { "type": "string", "default": "" },
        "type": { "type": "string", "default": "ledger" },
        "project_id": { "type": "string", "default": "" },
        "content": { "type": ["object", "null"], "default": null },
        "period": { "type": ["object", "null"], "default": null },
        "currency": { "type": "string", "default": "" },
        "raw": { "type": "string", "default": "" },
        "state": { "type": "string", "default": "uploaded" },
        "errors": { "type": "array", "items": { "type": "string" }, "default": [] },
        "warnings": { "type": "array", "items": { "type": "string" }, "default": [] },
        "infos": { "type": "array", "items": { "type": "string" }, "default": [] }
      }
    },
    "DDocumentBase": {
      "title": "DDocumentBase",
      "type": "object",
      "properties": {
        "id": { "type": ["string", "null"], "default": null },
        "version": { "type": "string", "default": "0.4" },
        "title": { "type": "string", "default": "" },
        "type": { "type": "string", "default": "ledger" },
        "project_id": { "type": "string", "default": "" },
        "content": {
          "anyOf": [
            { "$ref": "#/$defs/DContent" },
            { "type": "null" }
          ],
          "default": null
        },
        "raw": { "type": "string", "default": "" },
        "state": { "type": "string", "default": "uploaded" },
        "errors": { "type": "array", "items": { "type": "string" }, "default": [] },
        "created_at": { "type": ["string", "null"], "format": "date-time", "default": null },
        "modified_at": { "type": ["string", "null"], "format": "date-time", "default": null }
      }
    }
  }
}
